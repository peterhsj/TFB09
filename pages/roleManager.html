<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>台北富邦銀行 - 台塑信用狀系統</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@7.4.47/css/materialdesignicons.min.css" media="all" />
  <link rel="stylesheet" href="../css/custom.css">
</head>

<body>
  <!-- 角色維護 -->
  <div id="roleManager" class="py-4 px-5">
    <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
      <ol class="breadcrumb fs-6">
        <li class="breadcrumb-item">
          <a id="homePage" class="tfb__path" href="javascript:void(0)">首頁</a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">角色維護</li>
      </ol>
    </nav>
    <h1 class="fs-4 fw-bolder">角色權限管理</h1>
    <div class="py-2 text-end">
      <button type="button" id="addItem" class="px-3 btn btn-sm tfb__btn-default" data-bs-toggle="modal" data-bs-target="#roleManagerModal">
        <span class="mdi mdi-plus"></span>
        新增
      </button>
    </div>
    <div class="table-responsive">
      <table class="table table-striped table-sm tfb__table">
        <thead>
          <tr>
            <th scope="col" class="tfb__tbhd">角色代碼</th>
            <th scope="col" class="tfb__tbhd">角色名稱</th>
            <th scope="col" class="tfb__tbhd">角色種類</th>
            <th scope="col" class="tfb__tbhd">功能</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-center">1</td>
            <td class="text-center">系統管理員</td>
            <td class="text-center">預設</td>
            <td class="text-center w-25">
              <button type="button" class="editItem my-1 px-3 btn btn-sm tfb__btn-default" data-bs-toggle="modal" data-bs-target="#roleManagerModal">
                <span class="mdi mdi-pencil"></span>
                編輯
              </button>
              <button type="button" class="my-1 px-3 btn btn-sm tfb__btn-red" data-bs-toggle="modal" data-bs-target="#delRoleManagerModal">
                <span class="mdi mdi-trash-can-outline"></span>
                刪除
              </button>
            </td>
          </tr>
          <tr>
            <td class="text-center">2</td>
            <td class="text-center">分行管理員</td>
            <td class="text-center">一般</td>
            <td class="text-center">
              <button type="button" class="editItem my-1 px-3 btn btn-sm tfb__btn-default" data-bs-toggle="modal" data-bs-target="#roleManagerModal">
                <span class="mdi mdi-pencil"></span>
                編輯
              </button>
              <button type="button" class="my-1 px-3 btn btn-sm tfb__btn-red" data-bs-toggle="modal" data-bs-target="#delRoleManagerModal">
                <span class="mdi mdi-trash-can-outline"></span>
                刪除
              </button>
            </td>
          </tr>
          <tr>
            <td class="text-center">3</td>
            <td class="text-center">分行主管</td>
            <td class="text-center">一般</td>
            <td class="text-center">
              <button type="button" class="editItem my-1 px-3 btn btn-sm tfb__btn-default" data-bs-toggle="modal" data-bs-target="#roleManagerModal">
                <span class="mdi mdi-pencil"></span>
                編輯
              </button>
              <button type="button" class="my-1 px-3 btn btn-sm tfb__btn-red" data-bs-toggle="modal" data-bs-target="#delRoleManagerModal">
                <span class="mdi mdi-trash-can-outline"></span>
                刪除
              </button>
            </td>
          </tr>
          <tr>
            <td class="text-center">4</td>
            <td class="text-center">分行經辦</td>
            <td class="text-center">一般</td>
            <td class="text-center">
              <button type="button" class="editItem my-1 px-3 btn btn-sm tfb__btn-default" data-bs-toggle="modal" data-bs-target="#roleManagerModal">
                <span class="mdi mdi-pencil"></span>
                編輯
              </button>
              <button type="button" class="my-1 px-3 btn btn-sm tfb__btn-red" data-bs-toggle="modal" data-bs-target="#delRoleManagerModal">
                <span class="mdi mdi-trash-can-outline"></span>
                刪除
              </button>
            </td>
          </tr>
          
        </tbody>
      </table>
    </div>
  </div>

  <!-- roleManagerModal -->
  <div class="modal fade" id="roleManagerModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="roleManagerModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content tfb__modal">
        <form>
          <div class="modal-header py-2 border-bottom-0">
            <h5 class="modal-title fs-5 fw-bolder" id="roleManagerTitle">
              新增/編輯角色
            </h5>
            <button type="button" class="m-0 p-0 btn-close tfb__btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body bg-light">            
            <h5 class="mb-2 fs-6 fw-bolder tfb__title">
              <span id="roleTitle">角色設定</span>
              <span class="ms-2 fs-0-8 tfb__text text-danger">
                * 為必填欄位
              </span>
            </h5>
            <div class="table-responsive">
              <table class="table table-sm tfb__table">
                <tbody>
                  <tr>
                    <th class="tfb__tbhd2">角色代碼</th>
                    <td class="bg-white">
                      <input id="roleNo" class="form-control form-control-sm" type="text" readonly value="">
                    </td>
                  </tr>
                  <tr>
                    <th class="tfb__tbhd2">
                      <span class="text-danger">*</span>
                      角色名稱
                    </th>
                    <td class="bg-white">
                      <input id="roleName" class="form-control form-control-sm" type="text" value="">
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <h5 class="mb-2 fs-6 fw-bolder tfb__title">
              權限設定
            </h5>
            <div class="card">
              <div class="card-body">
                <div class="container">
                  <div class="row">
                    <div class="col-2 text-end text-nowrap py-1">
                      查詢作業
                    </div>
                    <div class="col-10 py-1">
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="option11" value="option11">
                        <label class="form-check-label" for="option11">
                          查詢信用狀資料
                        </label>
                      </div>
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="option12" value="option12">
                        <label class="form-check-label" for="option12">
                          查詢押匯資料
                        </label>
                      </div>
                    </div>
                    <div class="col-2 text-end text-nowrap py-1">
                      押匯審核
                    </div>
                    <div class="col-10 py-1">
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="option21" value="option21">
                        <label class="form-check-label" for="option21">
                          受理押匯作業
                        </label>
                      </div>
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="option22" value="option22">
                        <label class="form-check-label" for="option22">
                          審核押匯作業
                        </label>
                      </div>
                    </div>
                    <div class="col-2 text-end text-nowrap py-1">
                      管理作業
                    </div>
                    <div class="col-10 py-1">
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="option31" value="option31">
                        <label class="form-check-label" for="option31">台塑集團及事業部</label>
                      </div>
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="option32" value="option32">
                        <label class="form-check-label" for="option32">台塑集團受益人</label>
                      </div>
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="option33" value="option33">
                        <label class="form-check-label" for="option33">台塑集團信用狀統計表</label>
                      </div>
                    </div>
                    <div class="col-2 text-end text-nowrap py-1">
                      系統紀錄
                    </div>
                    <div class="col-10 py-1">
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="option41" value="option41">
                        <label class="form-check-label" for="option41">存取軌跡紀錄</label>
                      </div>
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="option42" value="option42">
                        <label class="form-check-label" for="option42">系統傳送紀錄</label>
                      </div>
                    </div>
                    <div class="col-2 text-end text-nowrap py-1">
                      角色維護
                    </div>
                    <div class="col-10 py-1">
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="option52" value="option52">
                        <label class="form-check-label" for="option52">
                          角色維護
                        </label>
                      </div>
                    </div>
                    <div class="col-2 text-end text-nowrap py-1">
                      帳號維護
                    </div>
                    <div class="col-10 py-1">
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="option51" value="option51">
                        <label class="form-check-label" for="option51">
                          帳號維護
                        </label>
                      </div>
                    </div>
                    <div class="col-2 text-end text-nowrap py-1">
                      分行資料查詢
                    </div>
                    <div class="col-10 py-1">
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="option53" value="option53">
                        <label class="form-check-label" for="option53">
                          分行資料查詢
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer justify-content-center border-top-0">
            <button type="button" class="px-3 btn border-1 tfb__btn-cancel" data-bs-dismiss="modal">取消</button>
            <button type="reset" class="px-3 btn border-1 tfb__btn-cancel">清空</button>
            <button type="button" id="modalConfirm" class="px-3 btn border-1 tfb__btn-confirm">確認</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <!-- Js -->
  <script>
    // 新增編輯的狀態顯示
    const roleManagerTitle = document.querySelector('#roleManagerTitle');
    const roleTitle = document.querySelector('#roleTitle');
    const addItem = document.querySelector('#addItem');
    const editItem = document.querySelectorAll('.editItem');
    const idList = ['roleNo', 'roleName'];
    const domList = idList.map(id => {
      this[id] = document.querySelector(`#${id}`);
      return this[id];
    });
    
    // 新增
    addItem.addEventListener('click', () => {
      const data = ['由系統產生'];
      roleManagerTitle.textContent = '新增角色及權限設定';
      roleTitle.textContent = '角色設定';
      domList[0].value = '由系統產生';
      domList[1].value = '';
      domList[1].removeAttribute('readonly');
      domList[1].removeAttribute('disabled');
    })

    // 編輯
    editItem.forEach(item => {
      const data = ['2', '分行管理員'];
      item.addEventListener('click', () => {
        roleManagerTitle.textContent = '編輯權限';
        roleTitle.textContent = '角色';        
        domList.forEach((dom, index) => {
          dom.value = data[index];
          dom.setAttribute('readonly', '');
          dom.setAttribute('disabled', '');
        })
      })
    });

    // modalConfirm button Handler
    const roleManagerModal = document.querySelector('#roleManagerModal');
    const modalConfirm = document.querySelector('#modalConfirm');
    modalConfirm.addEventListener('click', () => {
      $(roleManagerModal).modal('hide');
    })  
  </script>

  <!-- delRoleManagerModal -->
  <div class="modal fade" id="delRoleManagerModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="delRoleManagerModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content tfb__modal">
        <div class="modal-body bg-light">            
          <p class="mb-2 py-3 fs-5 fw-bolder text-center">
            確認刪除所選取的資料?
          </p>
        </div>
        <div class="modal-footer justify-content-center border-top-0">
          <button type="button" class="px-3 btn border-1 tfb__btn-cancel" data-bs-dismiss="modal">取消</button>
          <button type="button" id="modalDelConfirm" class="px-3 btn border-1 tfb__btn-confirm">確認</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Js -->
  <script>
    // modalConfirm button Handler
    const delRoleManagerModal = document.querySelector('#delRoleManagerModal');
    const modalDelConfirm = document.querySelector('#modalDelConfirm');
    modalDelConfirm.addEventListener('click', () => {
      $(delRoleManagerModal).modal('hide');
    })  
  </script>
    
  <!-- 角色維護 -->
  <script src="../js/bootstrap.bundle.min.js"></script>  
  <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
  <script src="../js/page.js"></script>
</body>
</html>