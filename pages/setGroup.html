<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>台北富邦銀行 - 台塑信用狀系統</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@7.4.47/css/materialdesignicons.min.css" media="all" />
  <link rel="stylesheet" href="../css/custom.css">
</head>

<body>
  <!-- 設定台塑網平台之集團及事業部 -->
  <div id="setGroup" class="py-4 px-5">
    <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
      <ol class="breadcrumb fs-6">
        <li class="breadcrumb-item">
          <a id="homePage" class="tfb__path" href="javascript:void(0)">首頁</a>
        </li>
        <li class="breadcrumb-item">管理作業</li>
        <li class="breadcrumb-item active" aria-current="page">設定台塑網平台之集團及事業部</li>
      </ol>
    </nav>
    <h1 class="fs-4 fw-bolder">集團及事業部清冊</h1>
    <div class="py-2 text-end">
      <button type="button" id="addItem" class="px-3 btn btn-sm tfb__btn-default" data-bs-toggle="modal" data-bs-target="#groupModal" onclick="addModal()">
        <span class="mdi mdi-plus"></span>
        新增
      </button>
    </div>
    <div class="table-responsive">
      <table class="table table-sm tfb__table">
        <thead>
          <tr>
            <th scope="col" class="tfb__tbhd w-25">集團別</th>
            <th scope="col" class="tfb__tbhd w-10">事業部代號</th>
            <th scope="col" class="tfb__tbhd">事業部名稱</th>
            <th scope="col" class="tfb__tbhd w-25">功能</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td rowspan="10" class="text-center">台灣塑膠</td>
            <td class="border__bottom-white text-center">1</td>
            <td class="border__bottom-white">塑膠部</td>
            <td rowspan="10" class="text-center">
              <button type="button" class="editItem px-3 btn btn-sm tfb__btn-default" data-bs-toggle="modal" data-bs-target="#groupModal" onclick="editItem()">
                <span class="mdi mdi-pencil"></span>
                編輯
              </button>
              <button type="button" class="my-1 px-3 btn btn-sm tfb__btn-red" data-bs-toggle="modal" data-bs-target="#delModal">
                <span class="mdi mdi-trash-can-outline"></span>
                刪除
              </button>
            </td>
          </tr>
          <tr>
            <td class="border__bottom-white text-center">2</td>
            <td class="border__bottom-white">台麗朗部</td>
          </tr>
          <tr>
            <td class="border__bottom-white text-center">4</td>
            <td class="border__bottom-white">電石部</td>
          </tr>
          <tr>
            <td class="border__bottom-white text-center">7</td>
            <td class="border__bottom-white">塑膠加工組</td>
          </tr>
          <tr>
            <td class="border__bottom-white text-center">8</td>
            <td class="border__bottom-white">聚烤部</td>
          </tr>
          <tr>
            <td class="border__bottom-white text-center">A</td>
            <td class="border__bottom-white">化學品部</td>
          </tr>
          <tr>
            <td class="border__bottom-white text-center">P</td>
            <td class="border__bottom-white">聚丙烤部</td>
          </tr>
        </tbody>
      </table>
      <table class="table table-sm tfb__table">
        <thead>
          <tr>
            <th scope="col" class="tfb__tbhd w-25">集團別</th>
            <th scope="col" class="tfb__tbhd w-10">事業部代號</th>
            <th scope="col" class="tfb__tbhd">事業部名稱</th>
            <th scope="col" class="tfb__tbhd w-25">功能</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td rowspan="10" class="text-center">台塑石化</td>
            <td class="border__bottom-white text-center">1</td>
            <td class="border__bottom-white">塑膠部</td>
            <td rowspan="10" class="text-center">
              <button type="button" class="editItem px-3 btn btn-sm tfb__btn-default" data-bs-toggle="modal" data-bs-target="#groupModal" onclick="editItem()">
                <span class="mdi mdi-pencil"></span>
                編輯
              </button>
              <button type="button" class="my-1 px-3 btn btn-sm tfb__btn-red" data-bs-toggle="modal" data-bs-target="#delModal">
                <span class="mdi mdi-trash-can-outline"></span>
                刪除
              </button>
            </td>
          </tr>
          <tr>
            <td class="border__bottom-white text-center">2</td>
            <td class="border__bottom-white">台麗朗部</td>
          </tr>
          <tr>
            <td class="border__bottom-white text-center">4</td>
            <td class="border__bottom-white">電石部</td>
          </tr>
          <tr>
            <td class="border__bottom-white text-center">7</td>
            <td class="border__bottom-white">塑膠加工組</td>
          </tr>
          <tr>
            <td class="border__bottom-white text-center">8</td>
            <td class="border__bottom-white">聚烤部</td>
          </tr>
          <tr>
            <td class="border__bottom-white text-center">A</td>
            <td class="border__bottom-white">化學品部</td>
          </tr>
          <tr>
            <td class="border__bottom-white text-center">P</td>
            <td class="border__bottom-white">聚丙烤部</td>
          </tr>
        </tbody>
      </table>
      <table class="table table-sm tfb__table">
        <thead>
          <tr>
            <th scope="col" class="tfb__tbhd w-25">集團別</th>
            <th scope="col" class="tfb__tbhd w-10">事業部代號</th>
            <th scope="col" class="tfb__tbhd">事業部名稱</th>
            <th scope="col" class="tfb__tbhd w-25">功能</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td rowspan="10" class="text-center">南亞塑膠</td>
            <td class="border__bottom-white text-center">1</td>
            <td class="border__bottom-white">塑膠第一事業部</td>
            <td rowspan="10" class="text-center">
              <button type="button" class="editItem px-3 btn btn-sm tfb__btn-default" data-bs-toggle="modal" data-bs-target="#groupModal" onclick="editItem()">
                <span class="mdi mdi-pencil"></span>
                編輯
              </button>
              <button type="button" class="my-1 px-3 btn btn-sm tfb__btn-red" data-bs-toggle="modal" data-bs-target="#delModal">
                <span class="mdi mdi-trash-can-outline"></span>
                刪除
              </button>
            </td>
          </tr>
          <tr>
            <td class="border__bottom-white text-center">3</td>
            <td class="border__bottom-white">塑膠第三事業部</td>
          </tr>
          <tr>
            <td class="border__bottom-white text-center">4</td>
            <td class="border__bottom-white">化工第二事業部</td>
          </tr>
          <tr>
            <td class="border__bottom-white text-center">7</td>
            <td class="border__bottom-white">化工第一事業部</td>
          </tr>
          <tr>
            <td class="border__bottom-white text-center">8</td>
            <td class="border__bottom-white">電子材料事業部</td>
          </tr>
          <tr>
            <td class="border__bottom-white text-center">9</td>
            <td class="border__bottom-white">工務部</td>
          </tr>
          <tr>
            <td class="border__bottom-white text-center">A</td>
            <td class="border__bottom-white">化工第三事業部</td>
          </tr>
          <tr>
            <td class="border__bottom-white text-center">B</td>
            <td class="border__bottom-white">塑膠第二事業部</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- groupModal -->
  <div class="modal fade" id="groupModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="groupModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content tfb__modal">
        <form>
          <div class="modal-header py-2 border-bottom-0">
            <h5 class="modal-title fs-5 fw-bolder" id="groupModalLabel">
              新增/編輯集團及事業部資料
            </h5>
            <button type="button" class="m-0 p-0 btn-close tfb__btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body bg-light">
            <div class="table-responsive bg-white">
              <table class="table table-sm tfb__table">
                <tbody>
                  <tr>
                    <th class="tfb__tbhd2">集團名稱</th>
                    <td class="bg-white">
                      <input id="groupName" class="form-control form-control-sm" type="text">
                    </td>
                  </tr>
                </tbody>
              </table>

              <table class="table table-sm tfb__table">
                <thead>
                  <tr>
                    <th scope="col" class="tfb__tbhd">事業部代碼</th>
                    <th scope="col" class="tfb__tbhd">事業部名稱</th>
                    <th scope="col" class="tfb__tbhd w-25">
                      <button type="button" id="addDepartItem" class="px-3 btn btn-sm tfb__btn-default" onclick="addRow()">
                        <span class="mdi mdi-plus"></span>
                        新增
                      </button>
                    </th>
                  </tr>
                </thead>
                <tbody id="departList">
                  <tr>
                    <td>
                      <input class="form-control form-control-sm" type="text">
                    </td>
                    <td>
                      <input class="form-control form-control-sm" type="text">
                    </td>                    
                    <td class="text-center">
                      <button type="button" class="delDepartItem my-1 px-3 btn btn-sm tfb__btn-red" onclick="delDepart(event)">
                        <span class="mdi mdi-trash-can-outline"></span>
                        刪除
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="modal-footer justify-content-center border-top-0">
            <button type="button" class="px-3 btn border-1 tfb__btn-cancel" data-bs-dismiss="modal">取消</button>
            <button type="reset" class="px-3 btn border-1 tfb__btn-cancel">重設</button>
            <button type="button" id="modalConfirm" class="px-3 btn border-1 tfb__btn-confirm" onclick="confirm()">確認</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- JS -->
  <script>
    // 新增
    function addModal() {
      const departList = document.querySelector('#departList');
      groupName.value = '';
      departList.innerHTML = `
        <tr>
          <td>
            <input class="form-control form-control-sm" type="text">
          </td>
          <td>
            <input class="form-control form-control-sm" type="text">
          </td>                    
          <td class="text-center">
            <button type="button" class="delDepartItem my-1 px-3 btn btn-sm tfb__btn-red" onclick="delDepart(event)">
              <span class="mdi mdi-trash-can-outline"></span>
              刪除
            </button>
          </td>
        </tr>
      `;
    };

    // 新增列
    function addRow() {
      const addDepartItem = document.querySelector('#addDepartItem');
      const departList = document.querySelector('#departList');
      const newRow = document.createElement('tr');
  
      newRow.innerHTML = `
        <tr>
          <td>
            <input class="form-control form-control-sm" type="text">
          </td>
          <td>
            <input class="form-control form-control-sm" type="text">
          </td>                    
          <td class="text-center">
            <button type="button" class="delDepartItem my-1 px-3 btn btn-sm tfb__btn-red" onclick="delDepart(event)">
              <span class="mdi mdi-trash-can-outline"></span>
              刪除
            </button>
          </td>
        </tr>
      `;
      departList.appendChild(newRow);
    };

    // 刪除列
    function delDepart(e) {
      const departList = document.querySelector('#departList');
      departList.deleteRow(e.target.parentNode.parentNode.rowIndex - 1);
    };
    
    // modalConfirm button Handler
    function confirm() {
      const groupModal = document.querySelector('#groupModal');
      $(groupModal).modal('hide');
    };

    // 編輯
    function editItem() {
      const editItemList = document.querySelectorAll('.editItem');
      editItemList.forEach(item => {
        const groupName = document.querySelector('#groupName');
        const departList = document.querySelector('#departList');  
        
        groupName.value = '台灣塑膠';
        departList.innerHTML = `
          <tr>
            <td>
              <input class="form-control form-control-sm" type="text" value="1">
            </td>
            <td>
              <input class="form-control form-control-sm" type="text" value="塑膠部">
            </td>                    
            <td class="text-center">
              <button type="button" class="delDepartItem my-1 px-3 btn btn-sm tfb__btn-red" onclick="delDepart(event)">
                <span class="mdi mdi-trash-can-outline"></span>
                刪除
              </button>
            </td>
          </tr>
          <tr>
            <td>
              <input class="form-control form-control-sm" type="text" value="7">
            </td>
            <td>
              <input class="form-control form-control-sm" type="text" value="塑膠加工部">
            </td>                    
            <td class="text-center">
              <button type="button" class="delDepartItem my-1 px-3 btn btn-sm tfb__btn-red" onclick="delDepart(event)">
                <span class="mdi mdi-trash-can-outline"></span>
                刪除
              </button>
            </td>
          </tr>
          <tr>
            <td>
              <input class="form-control form-control-sm" type="text" value="8">
            </td>
            <td>
              <input class="form-control form-control-sm" type="text" value="聚烯部">
            </td>                    
            <td class="text-center">
              <button type="button" class="delDepartItem my-1 px-3 btn btn-sm tfb__btn-red" onclick="delDepart(event)">
                <span class="mdi mdi-trash-can-outline"></span>
                刪除
              </button>
            </td>
          </tr>
        `;
      });
    }
  </script>

  <!-- delModal -->
  <div class="modal fade" id="delModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="delModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content tfb__modal">
        <div class="modal-body bg-light">            
          <p class="mb-2 py-3 fs-5 fw-bolder text-center">
            確認刪除所選取的資料?
          </p>
        </div>
        <div class="modal-footer justify-content-center border-top-0">
          <button type="button" class="px-3 btn border-1 tfb__btn-cancel" data-bs-dismiss="modal">取消</button>
          <button type="button" id="modalDelConfirm" class="px-3 btn border-1 tfb__btn-confirm">確認</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Js -->
  <script>
    // modalConfirm button Handler
    const delModal = document.querySelector('#delModal');
    const modalDelConfirm = document.querySelector('#modalDelConfirm');
    modalDelConfirm.addEventListener('click', () => {
      $(delModal).modal('hide');
    })  
  </script>
  
  <!-- 設定台塑網平台之集團及事業部 -->
  <script src="../js/bootstrap.bundle.min.js"></script>  
  <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
  <script src="../js/page.js"></script>
</body>
</html>